---
title:  "[ìŠ¤í”„ë§ ë¡œë“œë§µ] - 1 "

categories:
  - spring-core
tags:
  - [spring-core]

breadcrumbs: true

date: 2024-01-24
last_modified_at: 2024-01-24
---

# Dispatcher Servlet

```java
protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {
  HttpServletRequest processedRequest = request;
  HandlerExecutionChain mappedHandler = null;
  boolean multipartRequestParsed = false;

  WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);

  try {
    ModelAndView mv = null;
    Exception dispatchException = null;

    try {
      processedRequest = checkMultipart(request);
      multipartRequestParsed = (processedRequest != request);

      // Determine handler for the current request.
      mappedHandler = getHandler(processedRequest);
      if (mappedHandler == null) {
        noHandlerFound(processedRequest, response);
        return;
      }

      // Determine handler adapter for the current request.
      HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());

      // Process last-modified header, if supported by the handler.
      String method = request.getMethod();
      boolean isGet = HttpMethod.GET.matches(method);
      if (isGet || HttpMethod.HEAD.matches(method)) {
        long lastModified = ha.getLastModified(request, mappedHandler.getHandler());
        if (new ServletWebRequest(request, response).checkNotModified(lastModified) && isGet) {
          return;
        }
      }

      if (!mappedHandler.applyPreHandle(processedRequest, response)) {
        return;
      }

      // Actually invoke the handler.
      mv = ha.handle(processedRequest, response, mappedHandler.getHandler());

      if (asyncManager.isConcurrentHandlingStarted()) {
        return;
      }

      applyDefaultViewName(processedRequest, mv);
      mappedHandler.applyPostHandle(processedRequest, response, mv);
    }
    catch (Exception ex) {
      dispatchException = ex;
    }
    catch (Throwable err) {
      // As of 4.3, we're processing Errors thrown from handler methods as well,
      // making them available for @ExceptionHandler methods and other scenarios.
      dispatchException = new ServletException("Handler dispatch failed: " + err, err);
    }
    processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);
  }
  catch (Exception ex) {
    triggerAfterCompletion(processedRequest, response, mappedHandler, ex);
  }
  catch (Throwable err) {
    triggerAfterCompletion(processedRequest, response, mappedHandler,
        new ServletException("Handler processing failed: " + err, err));
  }
  finally {
    if (asyncManager.isConcurrentHandlingStarted()) {
      // Instead of postHandle and afterCompletion
      if (mappedHandler != null) {
        mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);
      }
    }
    else {
      // Clean up any resources used by a multipart request.
      if (multipartRequestParsed) {
        cleanupMultipart(processedRequest);
      }
    }
  }
}
```
ì½”ë“œ ìì²´ëŠ” ê¸¸ì§€ ì•Šê³  ë³´ê¸°ë„ ì–´ë µì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
ë“œë””ì–´ ëœ¯ì–´ë´¤ìŠµë‹ˆë‹¤, DispatcherServlet!! ğŸ˜Š
![img.png](img/ë§¤í•‘ëœ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•˜ë‹¤.png)
![img.png](img/ì´ë ‡ê²Œ ë§ì€ í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ë‹¤ë‹ˆ.png)
![img.png](img/RequestMappingHandlerë¼ëŠ”ê³³ì—ì„œ ë§¤í•‘ë˜ëŠ” urlì„ ì°¾ì•˜ë‹¤.png)
![img.png](img/ì¸í„°ì…‰í„°ëŠ” ë‹¨ ë‘ì¢…ë¥˜ë§Œ ì¡´ì¬í•˜ëŠ”ê±´ê°€.png)
![img.png](img/HandlerAdapterë¡œë¶€í„° modelAndView ê°ì²´ê°€ ë‚˜ì˜¤ëŠ”êµ¬ë‚˜.png)
![img.png](img/ê·¸ë ‡ê²Œ ëª¨ë¸ì•¤ë·° ë‚˜ì˜¤ê³  ë‚˜ë©´ ì¸í„°ì…‰í„°ë¡œ ë„˜ì–´ê°„ë‹¤.png)
![img.png](img/ì´ë ‡ê²Œ responseê°€ ë Œë”ë§ ë˜ì–´ì„œ ë‚˜ì˜¨ë‹¤.png)
![img.png](img/ê·¸ë¦¬ê³  ë‹¤ì‹œ interceptorë¡œ ëŒì•„ê°€ì„œ postHandlerë¥¼ ì‹¤í–‰í•˜ëŠ”ê±´ê°€.png)
![img.png](img/ê·¸ëŸ¬ê³  ë‚˜ì„  í•„í„°ë¡œ ì´ë™.png)
![img.png](img/httpMessageConverterì˜ í´ë˜ìŠ¤ ê´€ê³„ë„.png)
![img.png](img/jackson2httpMessageConverter.png)
![img.png](img/AllEncompassingFormHttpMessageConverterë¼ëŠ”ê²Œ%20ìˆë‹¤.png)
![img.png](img/BeanFactory ì£¼ì…ì„ ìœ„í•œ ì¸ìŠ¤í„´ìŠ¤í™” ì „ëµì´ ìˆë‹¤.png)
- RequestFacade