---
title:  "[aws] ìŠ¤í”„ë§ì˜ Web Layerì™€ Domain ëª¨ë¸ "

categories:
  - aws-deploy-spring-boot
tags:
  - [aws-deploy-spring-boot]

toc: true
toc_sticky: true

breadcrumbs: true

date: 2023-10-11
last_modified_at: 2023-10-11
---

ğŸ¤¨ ê·¸ë ‡ë‹¤ë©´ **ì§„ì§œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€** ì–´ë””ì— ê°€ì•¼ í•˜ë‚˜ìš”?
**Domainìœ¼ë¡œ ê°€ì•¼ í•©ë‹ˆë‹¤.**

### íŠ¸ëœì­ì…˜ ìŠ¤í¬ë¦½íŠ¸
ê¸°ì¡´ì— ì„œë¹„ìŠ¤ì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ `íŠ¸ëœì­ì…˜ ìŠ¤í¬ë¦½íŠ¸`ë¼ê³  í•©ë‹ˆë‹¤.
ì•„ë˜ íŠ¸ëœì­ì…˜ ìŠ¤í¬ë¦½íŠ¸ì²˜ëŸ¼ ëª¨ë“  ë¡œì§ì´ ì„œë¹„ìŠ¤ì—ì„œ ì²˜ë¦¬ ë˜ë©´
ì„œë¹„ìŠ¤ ê³„ì¸µì´ ë¬´ì˜ë¯¸í•˜ë©° ê°ì²´ëŠ” ë‹¨ìˆœí•œ ë°ì´í„° ë©ì–´ë¦¬ê°€ ë©ë‹ˆë‹¤.
_sudo code_
```text
@Transactional
public Order cancelOrder(int orderId){
    1) DBë¡œë¶€í„° ì£¼ë¬¸ì •ë³´, ê²°ì œì •ë³´, ë°°ì†¡ì •ë³´ ì¡°íšŒ
    2) ë°°ì†¡ ì·¨ì†Œë¥¼ í•´ì•¼í•˜ëŠ”ì§€ í™•ì¸
    3) if(ë°°ì†¡ ì¤‘ì´ë¼ë©´){
            ë°°ì†¡ ì·¨ì†Œ
        }
    4) ê° í…Œì´ë¸”ì— ì·¨ì†Œ ìƒíƒœ UPDATe
}
```
_íŠ¸ëœì­ì…˜ ìŠ¤í¬ë¦½íŠ¸_
```java
public class OrderService{
  
    @Transactional 
    public Order cancelOrder(int orderId) {
        // 1)
        OrderDto order = ordersDao.selectOrders(orderId);
        BillingDto billing = billingDao.selectBilling(orderId);
        DeliveryDto delivery = deliveryDao.selectDelivery(orderId);
        // 2)
        String deliveryStatus = delivery.getStatus();

        // 3)
        if("IN_PROGRESS".equals(deliveryStatus)){
          delivery.setStatus("CANCEL");
          deliveryDao.update(delivery);
        }

        // 4)
        order.setStatus("CANCEL");
        ordersDao.update(order);
        billing.setStatus("CANCEL");
        deliveryDao.update(billing);
    
        return order;
    }
}
```
### ë„ë©”ì¸ ëª¨ë¸
```java
public class OrderService{

  @Transactional
  public Order cancelOrder(int orderId) {
    // 1)
    OrderDto order = ordersDao.selectOrders(orderId);
    BillingDto billing = billingDao.selectBilling(orderId);
    DeliveryDto delivery = deliveryDao.selectDelivery(orderId);

    // 2-3)
    delivery.cancel();

    // 4)
    order.cancel();
    billing.cancel();

    return order;
  }
}
```

### Web Layer(ì›¹ ê³„ì¸µ) ê³¼ ë„ë©”ì¸ ëª¨ë¸ íŒ¨í„´
![Web Layer(ì›¹ ê³„ì¸µ) ê³¼ ë„ë©”ì¸ ëª¨ë¸ íŒ¨í„´](./img/Web%20Layer(ì›¹%20ê³„ì¸µ)%20ê³¼%20ë„ë©”ì¸%20ëª¨ë¸%20íŒ¨í„´%20.png)
1. Web Layer
- ì™¸ë¶€ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì˜ì—­
2. Service Layer
  - íŠ¸ëœì­ì…˜ì˜ ì˜ì—­
  - Controllerì™€ DAO ì‚¬ì´ì˜ ì¤‘ì¬ì
3. Repository Layer
  - ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ì˜ì—­
  - DAOë¡œ ì´í•´í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.
4. DTO
  - ê³„ì¸µê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´
5. Domain Model
  - ê°œë°œ ëŒ€ìƒì„ ê°ì²´í™” í•  ìˆ˜ ìˆë„ë¡ ë‹¨ìˆœí•˜ê²Œ ê°œë…í™”í•œ ê±¸ ë„ë©”ì¸ëª¨ë¸ì´ë¼ê³  í•©ë‹ˆë‹¤.
  - ê°’ì„ ë‹´ì€ í´ë˜ìŠ¤ë¥¼ ë„ë©”ì¸ëª¨ë¸ì´ë¼ê³  ë´ë„ ë¬´ë°©í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

Request ë°ì´í„°ë¥¼ ë°›ëŠ” **DTO**
API ìš”ì²­ì„ ë°›ëŠ” **Controller**
íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í•˜ëŠ” **Service**
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” **Domain**


