---
title:  "[The java] ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²• - 1"

categories:
  - java-application-test
tags:
  - [java-application-test]

toc: true
toc_sticky: true

breadcrumbs: true

date: 2024-07-23
last_modified_at: 2024-07-23
---

# Junit5 ì†Œê°œ

![Junit5 í™˜ê²½ êµ¬ì„±](Junit5.png)

- Junit5ëŠ” Junit4ì™€ëŠ” ë‹¤ë¥´ê²Œ 3ê°€ì§€ ëª¨ë“ˆë¡œ ë‚˜ë‰˜ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.
  - Junit Platform : í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ëŸ°ì²˜ì™€ í…ŒìŠ¤íŠ¸ ì—”ì§„ APIë¥¼ ì œê³µ.
    - ëŸ°ì²˜ : í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ì—­í• .
    - í…ŒìŠ¤íŠ¸ ì—”ì§„ API : í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ì—”ì§„ì„ ì œê³µ.
  - Junit Jupiter : Junit5ì—ì„œ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ APIë¥¼ ì œê³µ.
  - Junit Vintage : Junit4ì™€ Junit3ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›.

- Junit5 ë¶€í„°ëŠ” í…ŒìŠ¤íŠ¸ê°€ êµ³ì´ publicì¼ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

### BeforeAll, AfterAll, BeforeEach, AfterEach

- BeforeAll : ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ë”± í•œë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤.
- AfterAll : ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ëœ í›„ì— í•œë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤.
- BeforeEach : ê° í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
- AfterEach : ê° í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ëœ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤.

```java
@DisplayNameGeneration(DisplayNameGenerator.ReplaceUnderscores.class)
class StudyTest {

  @Test
  void test1_underscore_replaced_by_blank() {
    Study study = new Study(10);
    assertAll(
      () -> assertEquals(StudyStatus.DRAFT, study.getStatus(), () -> "ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ ìƒíƒœê°’ì´ DRAFT ì—¬ì•¼ í•œë‹¤."),
      () -> assertSame(StudyStatus.DRAFT, study.getStatus(), () -> "ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ ìƒíƒœê°’ì´ DRAFT ì—¬ì•¼ í•œë‹¤."),
      () -> assertTrue(study.getLimit() > 0, () -> "ìŠ¤í„°ë”” ìµœëŒ€ ì°¸ì„ ì¸ì›ì€ 0ë³´ë‹¤ ì»¤ì•¼ í•œë‹¤.")
    );
    assertThrows(IllegalArgumentException.class, () -> new Study(-10));
  }

  @Test
  @DisplayName("í…ŒìŠ¤íŠ¸ - 2 ì…ë‹ˆë‹¤. ğŸ¥°")
  void test2() {
    assertTimeout(Duration.ofMillis(100), () -> {
      new Study(10);
      //Thread.sleep(300); // 100ms ë³´ë‹¤ 300msê°€ ê±¸ë¦¬ë©´ ì—ëŸ¬ ë°œìƒ
    });

    // preemptively : 100msê°€ ì§€ë‚˜ë©´ ì¦‰ê° ì¤‘ë‹¨
    assertTimeoutPreemptively(Duration.ofMillis(100), () -> {
      new Study(10);
      //Thread.sleep(300);
    });
    System.out.println("test2");
    // ThreadLocal ì‚¬ìš© ì‹œ ì£¼ì˜ : spring transaction ì˜ ê²½ìš° ThreadLocalì´ ê¸°ë³¸ì¸ë° ì´ ê²½ìš° ì“°ë ˆë“œ ê°„ì— ê³µìœ ë˜ì§€ ì•ŠëŠ”ë‹¤.
    // ì¦‰ transaction ì´ ì œëŒ€ë¡œ ì ìš©ì´ ì•ˆë  ìˆ˜ë„ ìˆë‹¤. rollback ì´ ì•ˆë˜ê³  dbì— ë°˜ì˜ì´ ë  ìˆ˜ë„ ìˆë‹¤.
  }

  @BeforeAll
  static void beforeAll() {
    System.out.println("before all");
  }

  @AfterAll
  static void afterAll() {
    System.out.println("after all");
  }

  @BeforeEach
  void beforeEach() {
    System.out.println("before each");
  }

  @AfterEach
  void afterEach() {
    System.out.println("after each");
  }

}
```
